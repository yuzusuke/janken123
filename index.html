<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/sample.css">
    <title>JKN Road</title>
</head>

<body>
    <header>
        <h1 class="text-center p-3">JAN・KEN・PON</h1>
    </header>
    <div class="container text-center">
        <div class="scoreboard m-auto">
            <div id="user" class="badge p-1 m-2">あなた</div>
            <span id="userScore">0</span>対<span id="computerScore">0</span>
            <div id="computer" class="badge p-1 m-2">コンピューター</div>
        </div>
        <div class="result mt-2 p-2" id="resulting">
            <p id="result"></p>
            <p id="computersChoice" class=""></p>
        </div>
        <div class="choices d-flex justify-content-center">
            <div class="choice choice1 p-2 m-2" id="rock">
                <img src="img/ぐー.png" alt="">
            </div>
            <div class="choice choice2 p-2 m-2" id="paper">
                <img src="img/パー.png" alt="">
            </div>
            <div class="choice choice3 p-2 m-2" id="scissors">
                <img src="img/チョキ.png" alt="">
            </div>
        </div>


        <p>Select your weapon!</p>
        <button class="btn btn-success" id="reset">Reset</button>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>

        let result = document.getElementById("result");
        let userScore = document.getElementById("userScore");
        let computerScore = document.getElementById("computerScore");
        let computersChoice = document.getElementById("computersChoice");

        let playerWins = 0;
        let computerWins = 0;
        let userChoice = "";
        let グー = document.getElementById("グー");
        let パー = document.getElementById("パー");
        let チョキ = document.getElementById("チョキ");

        rock.addEventListener("click", function () {
            let computerChoice = Math.floor(Math.random() * 100 + 1);
            if (computerChoice <= 34) {
                computerChoice = "グー";
            } else if (computerChoice <= 67) {
                computerChoice = "パー";
            } else {
                computerChoice = "チョキ";
            }
            userChoice = "グー";
            computersChoice.innerHTML = "コンピューターは、 " + computerChoice;
            compare(computerChoice, userChoice);
        })
        paper.addEventListener("click", function () {
            let computerChoice = Math.floor(Math.random() * 100 + 1);
            if (computerChoice <= 34) {
                computerChoice = "グー";
            } else if (computerChoice <= 67) {
                computerChoice = "パー";
            } else {
                computerChoice = "チョキ";
            }
            userChoice = "パー";
            computersChoice.innerHTML = "コンピューターは、" + computerChoice;
            compare(computerChoice, userChoice);
        })
        scissors.addEventListener("click", function () {
            let computerChoice = Math.floor(Math.random() * 100 + 1);
            if (computerChoice <= 34) {
                computerChoice = "グー";
            } else if (computerChoice <= 67) {
                computerChoice = "パー";
            } else {
                computerChoice = "チョキ";
            }
            userChoice = "チョキ";
            computersChoice.innerHTML = "コンピューターは" + computerChoice;
            compare(computerChoice, userChoice);
        })

        let compare = function (choice1, choice2, ) {
            if (choice1 == choice2) {
                result.innerHTML = "あいこで。。。"
            } else if (choice1 === グー) {
                if (choice2 === "チョキ") {
                    result.innerHTML = "コンピューター Wins!";
                    computerWins++;
                    computerScore.innerHTML = computerWins;
                } else {
                    result.innerHTML = "You Win!!!";
                    playerWins++;
                    userScore.innerHTML = playerWins;
                }
            } else if (choice1 === "パー") {
                if (choice2 === "グー") {
                    result.innerHTML = "コンピューター Wins!";
                    computerWins++;
                    computerScore.innerHTML = computerWins;
                } else {
                    result.innerHTML = "You Win!";
                    playerWins++;
                    userScore.innerHTML = playerWins;
                }
            } else if (choice1 === "チョキ") {
                if (choice2 === "グー") {
                    result.innerHTML = "You Win!";
                    playerWins++;
                    userScore.innerHTML = playerWins;
                } else {
                    result.innerHTML = "コンピューター Wins!";
                    computerWins++;
                    computerScore.innerHTML = computerWins;
                }
            }

        }
        document.getElementById("reset").addEventListener("click", function () {
            window.location.reload();
        })


    </script>
</body>

</html>